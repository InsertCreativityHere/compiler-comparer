A script I wrote got automatically checking different versions of the Slice compilers for regressions in their generated code.

### Examples

Check if the code generated by `slice2cpp` has changed in the last commit.
It will build the Slice compilers on the current and previous commits,
and run `slice2cpp` over all `*.ice` files in the top-level `slice` directory.
```
python compiler-comparer.py -b=HEAD -b=HEAD~1 -c=slice2cpp ./slice
```

Compare the generated code between the `main` branch and the `add-metadata-validation` branch.
The script will run _all_ available Slice compilers since none were specified,
but they will only be run over the two files: `./slice/Ice/Locator.ice` and `./slice/Ice/Router.ice`
```
python compiler-comparer.py -b=main -b=add-metadata-validation ./slice/Ice/Locator.ice ./slice/Ice/Router.ice
```

Compare the code generated by `slice2java` and `slice2cs` between the `main` branch and the `9100d41` commit.
The script will generate code for _every single_ `.ice` file in the repository.
The directory structure of the generated code is preserved, so there is no risk of file-name collisions.
```
python compiler-comparer.py --branch=main --branch=9100d41 --compiler=slice2java --compiler=slice2cs
```

### Usage

```
Usage: python compiler-comparer.py [options] [slice_files...]
```

`slice_files` should be separated by spaces and can be either individual files or directories.
If a file is provided it is passed directly to the Slice compilers (and should end with `.ice`).
If a directory is provided, this script will recursively search for all files ending with `.ice` within the directory and compile them.


```
Options:
-c, --compiler     Specifies a slice compiler that this script should run over Slice files.
                   This should be the bare name of the compiler, without any file extension.
                   For example: `--compiler=slice2java`
                   It is valid to provide multiple compilers; this script will run them in the
                   order they are provided.

                   If no compilers are specified, this script will automatically use _all_
                   the available Slice compilers on the current platform.


-b, --branch       Specifies which branches the script should checkout before building.
                   Actually this can be any 'treeish' including branch names, commit IDs, and tags.
                   For example: `--branch=main --branch=9100d41`
                   It is valid to provide multiple branches; this script will check them out and
                   build them in the order they are provided.

                   If no branches are specified, this script will automatically use `HEAD`.


--proj-path        Specifies the project file path that should be used to build the compilers.
                   It shouldn't be necessary to set this if you're inside the repository,
                   the script should be able to find `cpp/msbuild/ice.proj` automatically.
                   But if it can't, or you want to build with a different project, this exists.
                   For example: `--proj-path="D:/Code/Workspace/ice/cpp/msbuild/ice.proj"`


--compilers-path   Specifies where the compilers will be built, so the script can find them.
                   It shouldn't be necessary to set this if you're inside the repository,
                   the script should be able to locate them based on the current platform.
                   But if it can't, or you want to use a different set of compilers, this exists?

                   If provided, the path should be relative to the root of the repository.
                   For example: `--compilers-path="cpp/bin"`


--python-path      This is probably useless. I should probably remove it.
```

### Debugging

At the top of this script there is a hardcoded bool:
```
DEBUGGING = False;
```
Setting this to true will enable debug mode, which causes the script to output information about its own state,
but will also cause it to forward `stdout` to the current terminal sessions for any commands it runs, allowing you
to see the real-time output as it builds and runs the Slice compilers.

Note that `stderr` is _always_ forwarded to the current terminal session. So any warnings/errors produced by the build
will always be visible while running this script.
